{%  extends 'stuff/base.html'  %}
{%  load custom_filters  %}

{%  block title  %}{{  title  }}{%  endblock  %}

{%  block content  %}

<form method="get">
    {{ form.as_p }}
    {{ form_stock.as_p }}
    <button type="submit">Применить фильтр</button>
    <a href="{% url 'products' %}"><button type="button">Сбросить</button></a>
</form>

{%  for prod in  products  %}
    <img src="/media/{{ prod.image }}"   hspace='40' vspace='40' width='100px' height='100px'>
    <a href="{%  url 'product_card' prod.id  %}" >
        {{  prod.name  }}
    </a>
|
Код товара: {{  prod.code  }}
| {{  prod.group.name  }} | {{  prod.brand  }} |
    {{  prod.price|number_format  }} | {{  prod.description  }} | Количество: {{  prod.stock  }}<br>
{% empty %}
    <li>Нет товаров по заданным условиям.</li>
{% endfor %}

<div class="pagination">
    {%  if products.paginator.num_pages > 1  %}
        {% if products.has_previous %}
            <a href="?page=1">first</a>
            <a href="?page={{ products.previous_page_number }}">previous</a>
        {% endif %}

        Page {{ products.number }} of {{ products.paginator.num_pages }}.

        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}">next</a>
            <a href="?page={{ products.paginator.num_pages }}">last</a>
        {% endif %}
    {% endif %}
</div>

{%  endblock  %}